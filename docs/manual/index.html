<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Steve Hannah">
<title>Developing Native Mobile Apps with CodeRAD</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Developing Native Mobile Apps with CodeRAD</h1>
<div class="details">
<span id="author" class="author">Steve Hannah</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_preface">Preface</a></li>
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_what_is_codename_one">1.1. What is Codename One?</a></li>
<li><a href="#_advancing_from_hello_world_to_real_world">1.2. Advancing from "Hello World" to "Real World"</a></li>
<li><a href="#_what_is_coderad">1.3. What is CodeRAD?</a></li>
<li><a href="#_goals_of_coderad">1.4. Goals of CodeRAD</a></li>
<li><a href="#_first_order_ui_components_vs_second_order_ui_components">1.5. First-Order UI Components vs Second-Order UI Components</a></li>
<li><a href="#_third_order_ui_components_app_in_a_box">1.6. Third-Order UI Components: App-in-a-Box</a></li>
<li><a href="#_fundamental_concepts">1.7. Fundamental Concepts</a></li>
<li><a href="#_entities_properties_schemas_and_tags">1.8. Entities, Properties, Schemas and Tags</a></li>
<li><a href="#_views">1.9. Views</a></li>
<li><a href="#_controllers_and_actions">1.10. Controllers and Actions</a></li>
<li><a href="#_ui_descriptors_nodes_and_attributes">1.11. UI Descriptors (Nodes and Attributes)</a></li>
</ul>
</li>
<li><a href="#_installation">2. Installation</a>
<ul class="sectlevel2">
<li><a href="#_activating_css">2.1. Activating CSS</a></li>
<li><a href="#_installing_the_coderad_cn1lib">2.2. Installing the CodeRAD cn1lib</a></li>
</ul>
</li>
<li><a href="#_getting_started">3. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_step_1_create_a_new_project">3.1. Step 1: Create a New Project</a></li>
<li><a href="#_step_2_create_an_application_controller">3.2. Step 2: Create an Application Controller</a></li>
<li><a href="#_step_3_create_a_formcontroller">3.3. Step 3: Create a FormController</a></li>
<li><a href="#_adding_another_form">3.4. Adding another Form</a></li>
<li><a href="#_adding_a_view_model_asking_the_users_name">3.5. Adding a View Model: Asking the User&#8217;s Name</a></li>
<li><a href="#_refactoring_creating_views">3.6. Refactoring: Creating Views</a></li>
<li><a href="#_property_view_binding">3.7. Property View Binding</a></li>
<li><a href="#_summary">3.8. Summary</a></li>
<li><a href="#_where_to_go_from_here">3.9. Where to go from here</a></li>
</ul>
</li>
<li><a href="#_controllers">4. Controllers</a>
<ul class="sectlevel2">
<li><a href="#_application_structure_and_form_navigation_pre_coderad">4.1. Application Structure and Form Navigation Pre-CodeRAD</a></li>
<li><a href="#_app_structure_as_a_tree">4.2. App Structure as a Tree</a></li>
<li><a href="#_coderad_core_controllers">4.3. CodeRAD Core Controllers</a></li>
<li><a href="#_event_propagation_2">4.4. Event Propagation</a></li>
<li><a href="#_code_sharing_lookups">4.5. Code-sharing / Lookups</a></li>
<li><a href="#_example_controllers">4.6. Example Controllers</a></li>
<li><a href="#_form_navigation">4.7. Form Navigation</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_preface">Preface</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_is_codename_one">1.1. What is Codename One?</h3>
<div class="paragraph">
<p>Codename One is a toolkit for building cross-platform native mobile apps in Java and Kotlin.  It includes plugins for the three major Java IDEs: IntelliJ IDEA, NetBeans, and Eclipse, as well as a cross-platform class library to support all of your application&#8217;s needs.</p>
</div>
<div class="paragraph">
<p>The IDE plugin provides everything you need to get started developing a mobile app, including project templates, integrated device simulator with skins for many modern phones and tablets, and one-click building for iOS, Android, and other major platforms.</p>
</div>
<div class="paragraph">
<p>Unlike Google and Apple&#8217;s SDKs, which make you install completely new development environment, Codename One allows you to use your existing development environment, with the simple addition of a plugin, which is less than 100MB.</p>
</div>
<div class="paragraph">
<p>The Codename One learning curve for getting started is not very steep.  You&#8217;re looking at under 10 minutes from plugin install, to deploying your first "Hello World" app to your Android or iOS device.  The Codename One GUI builder makes it simple to drag a few labels and buttons onto a form to develop a basic UI, and there is a comprehensive library of tutorials on developing simple starter apps. Want to develop a "To Do list" app?  There&#8217;s a tutorial for that.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you&#8217;re new to Codename One, I recommend that you try building a basic "Hello World" app in Codename One, before proceeding to use CodeRAD.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The Codename One website is <a href="https://www.codenameone.com" class="bare">https://www.codenameone.com</a></p>
</li>
<li>
<p>Check out their <a href="https://www.codenameone.com/download.html">Getting Started page</a> for instructions on installing the Codename One plugin and creating your first "Hello World" application.</p>
</li>
<li>
<p>For a deeper dive, you may want to try one of the online courses at <a href="https://codenameone.teachable.com/">Codename One Academy</a>.</p>
</li>
<li>
<p>I highly recommend the book <a href="https://uber.cn1.co/">Create an Uber Clone in 7 days</a>, as it gives a comprehensive introduction to full-stack development, using Codename One as the client, and Spring Boot on the server.</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_advancing_from_hello_world_to_real_world">1.2. Advancing from "Hello World" to "Real World"</h3>
<div class="paragraph">
<p>Once you&#8217;ve finished your whistle-stop tour of tutorials, however, and you&#8217;re ready build your "real-world" app, you&#8217;ll quickly be pushing up against the classical software engineering challenges of old.  When your app only has a single form with a map and a few buttons, you don&#8217;t need to spend much time wrestling with architecture.  But what about when your app has dozens of forms, and menus, complex flows?  How do you organize your code so that it is maintainable.</p>
</div>
<div class="paragraph">
<p>Other than its "main" class which responds to the app lifecycle (init, start, stop, and destroy), Codename One doesn&#8217;t impose any sort of structure on your code.  You can place it all in a single class, or separate it out into packages and hierarchies that make sense for the domain of your app.  Codename One doesn&#8217;t care.  It just provides you with the low-level primitives (e.g. buttons, labels, media widgets, containers, networking APIs, etc..) to build a mobile app.  You can structure the app in any way you choose.  And this is where many developers end up hanging themselves (figuratively).  Most of the code examples are concerned with demonstrating the use of some component or API, not with architecture or design patterns.  Business logic is mixed in with "view logic" in order to make the example easier to understand.</p>
</div>
<div class="paragraph">
<p>If you build your app on the foundation of beginner tutorials, at some point you&#8217;ll reach terminal complexity, where working with your app&#8217;s code is no longer fun, and adding new features starts to break all the old features.  It doesn&#8217;t take long before you need to take a step back make architectural considerations.  As you&#8217;re designing your 34th form, you may also be looking for ways to re-use UI components more effectively.  The CodeRAD library was built to address this need.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_coderad">1.3. What is CodeRAD?</h3>
<div class="paragraph">
<p>CodeRAD is a library for Codename One that facilitates rapid development of Codename One apps by One classic design pattern that is tried and true for GUI applications is MVC (Model-View-Controller).  It includes foundation classes for developing models, views, and controllers, which dramatically increases code re-use and reduces application complexity.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<div class="title">From Wikipedia:</div>
<p>Model–view–controller (usually known as MVC) is a software design pattern commonly used for developing user interfaces which divides the related program logic into three interconnected elements. This is done to separate internal representations of information from the ways information is presented to and accepted from the user. This kind of pattern is used for designing the layout of the page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/MVC-Process.svg/200px-MVC-Process.svg.png" alt="200px MVC Process.svg">
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_goals_of_coderad">1.4. Goals of CodeRAD</h3>
<div class="paragraph">
<p>CodeRAD aims to increase developer productivity in building mobile applications by:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Employing MVC (Model-View-Controller) principles</strong> for structuring applications, leading to cleaner code that is easier to maintain.</p>
</li>
<li>
<p><strong>Providing reusable, high-level UI components</strong> that can be easily integrated into applications without having to do any UI design.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_first_order_ui_components_vs_second_order_ui_components">1.5. First-Order UI Components vs Second-Order UI Components</h3>
<div class="paragraph">
<p>A first-order UI component is a basic UI component, like a label, button, or text field, that is completely application-agnostic.  These form the fundamental building blocks of a GUI application, they need to be stitched together by the developer to form a coherent user interface for the user.</p>
</div>
<div class="paragraph">
<p>A second-order UI component is a complex UI component, usually composed of multiple basic components, which is designed for a specific type of application.  Some examples of second-order UI components are login forms, contacts lists, chat room components, news lists, etc..</p>
</div>
<div class="paragraph">
<p>First-order components are easier to develop and reuse because they don&#8217;t rely on any particular "model" or application type.  But having to reinvent the wheel every time you need a common type of second-order component (e.g. a login form) can be tedious and time-consuming.</p>
</div>
<div class="paragraph">
<p>Second-order components, being more complex, are harder to develop, and even harder to re-use.  Most second-order components are so application-specific that they are of no use to any app other than the one it was originally built for.</p>
</div>
<div class="paragraph">
<p>The Codename One core library includes a comprehensive set of first-order components, but very few second-order components, because of the reusability issues. There are lots of tutorials on how to build your own second-order components using the core components as building blocks, but even this can be time-consuming.</p>
</div>
<div class="paragraph">
<p>CodeRAD aims to improve the situation by providing a foundation for second-order UI components such as chat rooms, login forms, settings forms, and contact lists.  The key innovation that makes this possible is its use of "loose-coupling" to allow for greater degree of reusability and customization.  The goal is to develop UI kits for as many genres of applications as possible.  The first proof-of-concept component was the <a href="https://github.com/shannah/RADChatRoom">ChatRoomView</a>, which provides a fully-functional UI chat room component.  The second project is the <a href="https://github.com/shannah/TweetAppUIKit">Tweet App UI Kit</a> which provides high-quality UI components for building apps like Twitter.</p>
</div>
</div>
<div class="sect2">
<h3 id="_third_order_ui_components_app_in_a_box">1.6. Third-Order UI Components: App-in-a-Box</h3>
<div class="paragraph">
<p>A third-order component is a reusable UI component that provides full-application functionality out of the box.  The same principles used by CodeRAD to build second-order components could theoretically be used to produce fully-functional, yet reusable and customizable applications as turn-key components.  This is beyond the initial scope of CodeRAD&#8217;s aims, but after we&#8217;ve tamed enough of the second-order frontier, we may broaden our horizons and begin targetting entirely reusable apps.  Stay tuned&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_fundamental_concepts">1.7. Fundamental Concepts</h3>
<div class="paragraph">
<p>There are just a few fundamental concepts required to start using CodeRAD to accelerate your development.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">MVC (Model-View-Controller)</a> - A design pattern employed by CodeRAD which is used for developing user interfaces which divides the related program logic into three interconnected elements</p>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/MVC-Process.svg/200px-MVC-Process.svg.png" alt="200px MVC Process.svg">
</div>
</div>
</li>
<li>
<p><strong>Entities</strong> - CodeRAD introduces <code>Entity</code>, a base class for "model" classes.  This includes all the required plumbing for developing reusable components, such as property binding, property change events, data conversion, property lookup, etc&#8230;&#8203;</p>
</li>
<li>
<p><strong>Properties</strong> - Properties are the analog of instance variables for entities.  They include built-in support for binding, change events, and data-conversion.</p>
</li>
<li>
<p><strong>Tags</strong> - Tags enable loose-coupling of components.  Properties may contain one or more "tags" which can be used as a more generic way to reference properties on an entity.</p>
</li>
<li>
<p><strong>Views</strong> - A View is a user interface component that renders a model in a specific way.</p>
</li>
<li>
<p><strong>Controllers</strong> - Controllers define the structure and flow of an application.  All user interaction is handled by the controller.  Your application&#8217;s main class will be an instance of <code>ApplicationController</code>.  Each form can have an associated <code>FormController</code>.  In some cases you may associate a <code>ViewController</code> with other UI components also.</p>
</li>
<li>
<p><strong>Actions</strong> - Actions provide a means of extending the functionality of a view.  Each view will publish a list of action categories that it supports.  The controller may then register actions in these categories to embed buttons, menus, and functionality into the view.</p>
</li>
<li>
<p><strong>UI Descriptors</strong> - CodeRAD introduces a pure java declarative syntax for describing complex user interfaces.  A UI descriptor is a tree where each node is an instance of the <code>Node</code> class, and the root node is one of <code>FormNode</code>, <code>ViewNode</code>, or <code>ListNode</code>, depending on whether the UI is a form, a list, or a view.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_entities_properties_schemas_and_tags">1.8. Entities, Properties, Schemas and Tags</h3>
<div class="paragraph">
<p>The <strong>Entity</strong> sits at the core of CodeRAD.  The <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html">Entity</a> class is the base class of all model classes in CodeRAD.  Each <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html">Entity</a> has an <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/EntityType.html">EntityType</a> which defines the properties that are available in an entity.  Properties, in turn, may be "tagged" with zero or more <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Tag.html">Tag</a>s.  These tags can be used to lookup properties on an entity in a more generic way than referring to the property itself.</p>
</div>
<div class="paragraph">
<p>We provide a set of existing tags in the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/schemas/package-frame.html">schemas</a> package that can be used as a common foundation by both models and views.  These tags were adapted from the schema definitions at <a href="https://schema.org" class="bare">https://schema.org</a>.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a href="https://schema.org" class="bare">https://schema.org</a> provides a large set of schemas for common data types that one might need in an application.  It provides a base schema, <a href="https://schema.org/Thing">Thing</a> that includes properties that may be common to any type of "thing", such as <code>name</code>, <code>description</code>, <code>identifier</code>, <code>image</code> etc..  This schema has been ported into Java as the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/schemas/Thing.html">Thing</a> interface.</p>
</div>
<div class="paragraph">
<p>Each property has a corresponding <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Tag.html">Tag</a> defined.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The concept of tags is a simple one, but they have powerful effect.  If a view needs to render its model&#8217;s "phone number" (e.g. a contact list view), then it doesn&#8217;t need to know anything about the properties in the model.  It is able to look up the phone number of the model by the <code>Person.telephone</code> tag:</p>
</div>
<div class="listingblock java">
<div class="content">
<pre class="highlight"><code>String telephone = model.getText(Person.telephone);</code></pre>
</div>
</div>
<div class="paragraph">
<p>As long as the model includes a property that is tagged with the <code>Person.telephone</code> tag, this will work.  If the model doesn&#8217;t include this property, then this will simply return null.</p>
</div>
<div class="paragraph">
<p>You can check if the model&#8217;s entity type contains such a property using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Property telephoneProp = model.getEntityType().findProperty(Person.telephone);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will be <code>null</code> if there is no such property.</p>
</div>
<div class="paragraph">
<p>This simple trick allows us to completely decouple components from each other.  As long as they can agree on a common set of "Tags", they&#8217;ll be able to bind to each other seamlessly.</p>
</div>
<div class="paragraph">
<p>The following diagram depicts how Tags can be used as a sort of "glue" layer between the View and the Model, and Action categories (discussed later under "Controllers") as a glue lasyer between the View and the Controller.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://shannah.github.io/CodeRAD/javadoc/doc-files/Entity-Property-Tag-MVC.png" alt="Entity Property Tag MVC">
</div>
<div class="title">Figure 1. Tags are used to bind views to the appropriate properties of their view model using loose coupling.  Action categories are used to bind views to their controllers using loose coupling.</div>
</div>
<div class="sect3">
<h4 id="_example_entity_class">1.8.1. Example Entity Class</h4>
<div class="paragraph">
<p>The following figure shows the definition of a very simple entity class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class UserProfile extends Entity {
    public static StringProperty name, description; <b class="conum">(1)</b>
    public static final EntityType TYPE = new EntityType(){{ <b class="conum">(2)</b>
        name = string(); <b class="conum">(3)</b>
        description = string();
    }};
    {
        setEntityType(TYPE); <b class="conum">(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We define 2 properties of type <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/StringProperty.html">StringProperty</a> on the class.  A <code>StringProperty</code> is simply a property that contains a <code>String</code>.  These are defined <code>public static</code> so that we can access them conveniently from anywhere.</p>
</li>
<li>
<p>We define an <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/EntityType.html">EntityType</a> for the class.  This is also <code>public static</code> because it is class-level (all objects of this class should share the same entity type).</p>
</li>
<li>
<p>We create <code>name</code> and <code>description</code> properties on this entity type.  Notice that this code runs in the <strong>instance intializer</strong> of the EntityType (the <code>{{</code> and <code>}}</code> braces are not a typo).  Running this code inside the instance initializer will ensure that the properties are added to the `EntityType&#8217;s property index.</p>
</li>
<li>
<p>Inside the <code>UserProfile</code> instance initializer, we set the entity type to the entity type that we created above.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Why can&#8217;t we just use POJOs for our models?</strong></p>
</div>
<div class="paragraph">
<p>The <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html">Entity</a> class provides a lot of useful plumbing that is necessary for building reusable components that can bind to each other.  This includes property lookup, property binding, change events, and data conversion.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_adding_tags_to_properties">1.8.2. Adding Tags to Properties</h4>
<div class="paragraph">
<p>In the above entity class, we haven&#8217;t "tagged" any of the properties so it can&#8217;t be used as a view model for any view, unless that view has been specifically designed for this class, which would limit its reusability.  This is simple to remedy, though. Let&#8217;s tag the <code>name</code> property with <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/schemas/Thing.html#name">Thing.name</a>, and <code>description</code> with <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/schemas/Thing.html#description">Thing.description</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">name = string(tags(Thing.name));
description = string(tags(Thing.description));</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Properties can contain multiple tags.  E.g. If we want the name field to also be treated as the "ID" field, we could do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">name = string(tags(Thing.name, Thing.identifier));</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_property_values">1.8.3. Accessing Property Values</h4>
<div class="paragraph">
<p>We can access a property value using its property directly.  E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String name = model.get(UserProfile.name);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice here we didn&#8217;t need to cast the return value to "String" because the <code>Profile.name</code> property is declared as a string property.</p>
</div>
<div class="paragraph">
<p>We can also access the "name" property using the <code>Thing.name</code> tag, which is what allows us to use this as a loosely coupled view model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">String name = (String)model.get(Thing.name);</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>When using tags to access properties, it is best to use one of the <code>getXXX(Tag)</code> variants that explicitly converts the content type.  E.g. <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html#getText-com.codename1.rad.models.Property-">Entity.getText(Tag)</a>.  This is because there is no guarantee that a given entity is storing its <code>Thing.name</code> property as a String.  It could use any type of property.  Using <code>getText()</code> or <code>getBoolean()</code> will automatically handle data-conversion if possible.</p>
</div>
<div class="paragraph">
<p>See <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/ContentType.html">ContentType</a> for more information about data conversion in properties.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Using the convenience wrapper <code>getText()</code> and <code>setText()</code> we can then set the values on the <code>name</code> property in a generic way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">model.setText(Thing.name, "Steve");
String name = model.getText(Thing.name); // "Steve"</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>Technically, you don&#8217;t need to provide direct property access to your entity properties at all.  In our above <code>UserProfile</code> class we retained explicit references to the <code>name</code> and <code>description</code> properties, but we could have simply omitted this.  I.e. The following is also a perfectly valid entity type definition:</p>
</div>
<div class="listingblock">
<div class="title">An entity type that doesn&#8217;t retain explicit references to its properties.  The properties can still be accessed via their assigned tags.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class UserProfile extends Entity {
    public static final EntityType TYPE = new EntityType(){{
        string(tags(Thing.name));
        string(tags(Thing.description));
    }};
    {
        setEntityType(TYPE);
    }
}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_views">1.9. Views</h3>
<div class="paragraph">
<p>The "View" is the piece of the MVC pie that we are most interested in sharing and reusing.  A View is simply a <a href="https://www.codenameone.com/javadoc/com/codename1/ui/Component.html">Component</a> that includes support to "bind" to a view model (an <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html">Entity</a>), such that when properties on the view model are changed, the "View" updates to reflect the change.  The <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/ui/entityviews/package-frame.html">entityviews</a> package includes a set of read-developed view classes.  The best current example of a CodeRAD view is the <a href="https://github.com/shannah/RADChatRoom" target="_top">RADChatRoom</a>'s <code>ChatRoomView</code> component.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Creating view classes is more complex than creating models or controllers because they require a deeper understanding of both Codeame One concepts, and CodeRAD concepts.  The goal of this project is to provide a comprehensive set of quality views that can be reused so that developers don&#8217;t need to create their own views very often.  They can focus on their application&#8217;s control flow and business logic (i.e. models and controllers).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>View constructors will typically take two parameters:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>The view model</strong> - an <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html">Entity</a> object that is used for the view&#8217;s contents.</p>
</li>
<li>
<p><strong>A view node</strong> - a <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/nodes/Node.html">Node</a> object, which is part of a view descriptor hierarchy, and can provide additional settings for the view, such as actions to be rendered in the view as buttons or menus, factories to be used for generating parts of the view, simple properties, and virtually any other customizations the view wants to respond to.  You can think of the view node as a sort of "Schema" for the view.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Most views will extend from one of the following base classes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong><a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/ui/AbstractEntityView.html">AbstractEntityView</a></strong> - Provides a minimal framework for binding to property change events on an <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/Entity.html">Entity</a>.  Extend this class when your view model is a scalar entity.</p>
</li>
<li>
<p><strong><a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/ui/entityviews/EntityListView.html">EntityListView</a></strong> - Provides a minimal framework for list entities.  The view model is expected to be a <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/ui/EntityEditor.html">EntityEditor</a> or subclass thereof.  It will bind to the lists add and remove events to automatically add or remove rows from the view when corresponding elements are added or removed from the model.  It will accept a <code>listRenderer</code> attribute, which allows you to provide a  <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/ui/EntityListCellRenderer.html">EntityListCellRenderer</a> for rendering the list&#8217;s rows.  This makes the <code>EntityListView</code> class quite versatile, as it can be made to behave completely differently by simply providing a different row renderer.  The <code>ChatRoomView</code> class uses this class internall to render the chat bubbles.</p>
</li>
<li>
<p><strong><a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/ui/EntityEditor.html">EntityEditor</a></strong> - Used to render custom forms (e.g. with input fields) for editing data on an entity.  Usually this isn&#8217;t subclassed, it is used directly and customized using a UI descriptor (e.g. a View node).</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_no_application_or_business_logic_allowed">1.9.1. NO Application or Business Logic Allowed</h4>
<div class="paragraph">
<p>In order to get the benefits of MVC, you shouldn&#8217;t put any program login inside the view, outside of logic required to make the view function as a view.  If you&#8217;re used to calling <code>addActionListener()</code> directly on your buttons inside your view, thing may take some getting used to.  It requires some discipline.</p>
</div>
<div class="paragraph">
<p><strong>Use Actions</strong></p>
</div>
<div class="paragraph">
<p>Rather than embed logic directly inside the view, you should use actions to propagate relevant events up to the controller.  The <code>ChatRoomView</code>, for example, needs to let the controller know when the user has clicked the "Send" button in the chat room so that it can process the user input. In order to facilitate this, it defines an action category named <code>SEND_ACTION</code>, which the controller can use to register its own sent action to process such events.  When a user clicks the "Send" button of the view, the view checks to see if there is an action registered in this catgory, and, if so, it will fire the action.</p>
</div>
<div class="listingblock">
<div class="title">Action definition in the controller</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public static final ActionNode send = action(
    icon(FontImage.MATERIAL_SEND),
    // ... The rest of the action definition
);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Assign <code>send</code> action to the <code>SEND_ACTION</code> category and pass it to the view&#8217;s constructor in its View node.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ViewNode viewNode = new ViewNode(
    actions(ChatRoomView.SEND_ACTION, send),
    //.. rest of ViewNode definition
);
ChatRoomView view = new ChatRoomView(createViewModel(), viewNode, theForm);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Inside the View, when an event occurs (like user presses "send" button), it retrieves the <code>send</code> action that was passed to it by the controller.  If found, it fires the action&#8217;s event with the provided context.  This event will propagate up the view hierarchy, and the controller hierarchy so that the controller will be able to process the event.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ActionNode send = node.getAction(SEND_ACTION);
if (send != null) {
    send.fireEvent(entity, this);
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can even make this easier by converting the event to a Button and adding it to the view.  E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">if (send != null) {
    addComponent(send.createView(getEntity());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ActionNode.createView(Entity)</code> method will generate a UI component appropriate for the action.  In most cases this will be a button, but it may be a toggle button is the action is selectable.  This button will automatically fire the action&#8217;s event when the user presses it.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">In the controller, we add an action listener for the "send" action to process these events</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">addActionListener(send, evt-&gt;{
    evt.consume();
    // .. process the event

});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_controllers_and_actions">1.10. Controllers and Actions</h3>
<div class="paragraph">
<p>We touched on controllers and actions in the previous section on views, but they merit their own section since they are core concepts in CodeRAD.  Controllers serve two functions in CodeRAD:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Separation of Concerns</strong> - Controllers handle all of the "application logic" as it pertains to the user&#8217;s interaction with the app.  Keeping application logic separate from the view and the model has many advantages, including, but not limited to, easier code reuse.</p>
</li>
<li>
<p><strong>Application Structure &amp; Control Flow</strong> - Controllers provide hierarchical structure for applications in a similar way that Components provide hierarchical structure for user interfaces.  While it possible to use CodeRAD components in isolation, (without a controller hierarchy), you would be missing out on some of CodeRAD&#8217;s best features.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_the_navigation_hierarchy">1.10.1. The "Navigation Hierarchy"</h4>
<div class="paragraph">
<p>It is useful to think of your app&#8217;s controllers through the lense of a "navigation hierarchy".  The "root" node of this navigation hierarchy is the <code>ApplicationController</code>.  To show the first form in our app, we create a <code>FormController</code>, which can be views as a "Child controller" of the application controller.  If the user clicks a button that takes them to a new form, we create a new <code>FormController</code>, which is a child of the previous form controller.</p>
</div>
<div class="paragraph">
<p>CodeRAD&#8217;s <code>FormController</code> class includes built-in logic for "back" navigation.  If the <code>FormController&#8217;s parent controller is, itself, a `FormController</code>, then it will provide a "Back" button (and link up the Android "back" action) to return to the parent controller&#8217;s form.</p>
</div>
<div class="paragraph">
<p>Typical code for creating a FormController is:</p>
</div>
<div class="listingblock">
<div class="title">Typical code to create and show a FormController. This code is assumed to be in another FormController, so <code>this</code> refers to the current controller, passing it as the first parameter sets it as the `detailsController&#8217;s parent.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">DetailsFormController detailsController = new DetailsFormController(this, model);
detailsController.getView().show();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_event_propagation">1.10.2. Event Propagation</h4>
<div class="paragraph">
<p>The hierarchical view of controllers is also useful for understanding event dispatch.  When a <code>ControllerEvent</code> is fired on a UI component, it will propagate up the UI hierarchy (i.e. <a href="https://www.codenameone.com/javadoc/com/codename1/ui/Component.html">Component</a> &#8594; parent ..parent&#8230;&#8203;) until it finds a component with a <code>ViewController</code>.  The event will then be dispatched up the controller hierarchy until it is consumed.</p>
</div>
<div class="paragraph">
<p>For example, suppose, in our application, we have the following controller hierarchy:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Root Controller</strong> - The ApplicationController</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>ContactListController</strong> - The main form of the app: A contact list.</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>ContactDetailsController</strong> - The user clicked on a contact in the list, so they navigated to the "Details" form for that contact.  Thus the <code>ContactDetailsController</code> is a "child" of the <code>ContactListController</code>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following diagram depicts this hierarchy.  Suppose that there is a button on the contact details form, that the user clicks to initiate an action event.  Then the event will propagate up the UI hierarchy until it finds a component with a ViewController.  In this case, the "Detail" form is the first component with a ViewController: The <code>ContactDetailsController</code>.   If the <code>ContactDetailsController</code> contains a handler for the action that was fired, then it will process the event.  If the event is still not consumed, it will propagate up to the parent (the <code>ContactListController</code>), and give it an opportunity to handle the event.  If it is still not consumed, it will propagate up to the root controller (the <code>ApplicationController</code>).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://shannah.github.io/CodeRAD/javadoc/doc-files/ControllerEventPropagation.png" alt="ControllerEventPropagation">
</div>
<div class="title">Figure 2. This image depicts the propagation of an action event up the UI hierarchy and then the controller hierarchy.</div>
</div>
<div class="paragraph">
<p>The fact that action events propagate up through the controller hierarchy gives you flexibility on where you want to place your application logic for processing events.  This is very handy in cases where you want to handle the same action in two different controllers.</p>
</div>
<div class="paragraph">
<p>For example, suppose you have a "phone" action that allows you to phone a contact.  The <code>ContactListController</code> may support direct dialing of a contact in the list.  Additionally, you probably have a "Phone" button on the contact details form.  Since the <code>ContactDetailsController</code> is a "child" controller of the <code>ContactListController</code>, you can handle the action once inside the <code>ContactListController</code>, rather than duplicating code on both the list and details controllers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_a_simple_example_controller_hierarchy">1.10.3. A Simple Example Controller Hierarchy</h4>
<div class="paragraph">
<p>When I&#8217;m developing a CodeRAD application, I generally replace the contents of the main application class with a sublass of <code>ApplicationController</code>.  E.g. When you create a new CodenameOne project, it will create a main app class that has your lifecycle methods <code>init()</code>, <code>start()</code>, <code>stop()</code>, and <code>destroy()</code>.  <code>ApplicationController</code> implements these methods and converts them into events for cleaner code.</p>
</div>
<div class="paragraph">
<p>The following snippet is taken from the main application class of the CN1Chat example app.</p>
</div>
<div class="listingblock">
<div class="title">ApplicationController for the CN1Chat app.  It overrides <code>actionPerformed()</code> to handle the <code>StartEvent</code> (which is fired when the app starts up).  It simply creates a new <code>FormController</code>, and shows its view.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.cn1chat;


import com.codename1.rad.controllers.ApplicationController;
import com.codename1.rad.controllers.ControllerEvent;

public class CN1Chat extends ApplicationController {
     @Override
    public void actionPerformed(ControllerEvent evt) {
        if (evt instanceof StartEvent) {
            evt.consume();
            new ChatFormController(this).getView().show();
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ChatFormController</code> displays the chat room view:</p>
</div>
<div class="listingblock">
<div class="title">Excerpts from <code>ChatFormController</code>.  Defines a single action <code>send</code>, and adds it to the view.  Also handles the events when the <code>send</code> action is "fired".   See <a href="https://shannah.github.io/RADChatRoom/getting-started-tutorial.html">this tutorial</a> for a more comprehensive treatment of this material.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ChatFormController extends FormController {
    // Define the "SEND" action for the chat room
    public static final ActionNode send = action( <b class="conum">(1)</b>
        enabledCondition(entity-&gt; {
            return !entity.isEmpty(ChatRoom.inputBuffer);
        }),
        icon(FontImage.MATERIAL_SEND)
    );

    //... More action definitions

    public ChatFormController(Controller parent) {
        super(parent); <b class="conum">(2)</b>
        Form f = new Form("My First Chat Room", new BorderLayout());

        // Create a "view node" as a UI descriptor for the chat room.
        // This allows us to customize and extend the chat room.
        ViewNode viewNode = new ViewNode(
            actions(ChatRoomView.SEND_ACTION, send), <b class="conum">(3)</b>
            // ... more action definitions
        );

        // Add the viewNode as the 2nd parameter
        ChatRoomView view = new ChatRoomView(createViewModel(), viewNode, f); <b class="conum">(4)</b>
        f.add(CENTER, view);
        setView(f);

        // Handle the send action
        addActionListener(send, evt-&gt;{ <b class="conum">(5)</b>
            evt.consume();
            //.. code to handle the send action.

        });
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Define an action.</p>
</li>
<li>
<p>Call <code>super(parent)</code> to register the given controller as its parent controller, so that unhandled events will propagate to it.</p>
</li>
<li>
<p>Assign <code>send</code> action to the <code>SEND_ACTION</code> category (requirement of the <code>ChatRoomView</code> component). The <code>ChatRoomView</code> will check this category for the presense of an action.  If none is found, it simply won&#8217;t include a send button in the UI, nor will it fire "send" events.</p>
</li>
<li>
<p>Create a new <code>ChatRoomView</code>, passing it a dummy view model, and the <code>viewNode</code> that includes our action.</p>
</li>
<li>
<p>Register a handler for the "send" action.  Notice that we could have registered this handler in the parent controller instead (i.e. the ApplicationController) because unhandled events would propagate up.  In this case, it makes more sense as a part of the ChatFormController though.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ui_descriptors_nodes_and_attributes">1.11. UI Descriptors (Nodes and Attributes)</h3>
<div class="paragraph">
<p>A UI descriptor is a Tree structure consisting of Nodes and Attributes that describes a user interface in a way that is useful for building views.  The main advancement provided by UI descriptors is the ability to define user interfaces declaratively, <strong>in java</strong>.   The primary use-case for UI descriptors is for building editable forms.  The <code>EntityEditor</code> class is a View that renders complex forms for editing the properties of an entity.  It uses UI descriptors to specify which properties to include in the form, what widgets to use, how the form should be laid out, etc&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>The following is an example of a UI descriptor for editing a "Person" entity.</p>
</div>
<div class="listingblock">
<div class="title">A UI descriptor for a form to edit a "Person" entity</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.demos.ddddemo;

import com.codename1.rad.ui.UI;
import com.codename1.rad.nodes.ActionNode;
import static com.codename1.demos.ddddemo.PersonEntityType.*;
import com.codename1.ui.FontImage;
import static com.codename1.ui.FontImage.MATERIAL_DELETE;
import static com.codename1.rad.nodes.FormNode.OVERFLOW_MENU;
import static com.codename1.rad.nodes.FormNode.BOTTOM_RIGHT_MENU;
import static com.codename1.rad.nodes.FormNode.TOP_LEFT_MENU;


public class PersonEditor extends UI {

    // Define some actions
    public static ActionNode
        deleteAction = action(
            label("Delete"),
            description("Delete this user"),
            icon(MATERIAL_DELETE)
        ),
        showContactsAction = action(
            label("Open Contacts"),
            description("Show all contacts"),
            icon(FontImage.MATERIAL_CONTACTS)
        ),
        printAction = action(
            label("Print"),
            description("Print this page"),
            icon(FontImage.MATERIAL_PRINT)
        );

    {


        // Define the root form.
        form(
            actions(OVERFLOW_MENU, deleteAction, printAction),  <b class="conum">(1)</b>
            actions(TOP_LEFT_MENU, deleteAction, printAction, showContactsAction), <b class="conum">(2)</b>
            actions(BOTTOM_RIGHT_MENU, deleteAction, printAction), <b class="conum">(3)</b>
            editable(true),
            description("Please edit the person's information in the fields below"),
            label("Person Details"),
            columns(2),
            textField(
                label("Name"),
                description("Please enter your name"),
                tags(Person.name)
            ),
            textField(
                tags(description)
            ),
            comboBox(
                tags(DemoTags.hairColor)
            ),
            section(
                actions(TOP_LEFT_MENU, deleteAction, printAction),
                columns(1),
                label("Section 2"),
                textArea(
                    tags(DemoTags.userProfile)
                ),
                table(actions(OVERFLOW_MENU, deleteAction, printAction),
                   label("Quick Links"),
                   description("Useful links related to this person"),
                   editable(true),
                   //property(quicklinks),
                   tags(com.codename1.rad.schemas.Person.url),
                   columns(new QuickLinkEditor().getAllFields())
                )
            )

        );

}}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We add an overflow menu to the form.</p>
</li>
<li>
<p>Add some actions to the top-left menu.</p>
</li>
<li>
<p>Add some actions to the bottom-right menu.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Notice how succinct, yet readable this code is.  We can convert this into an actual view with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">new EntityEditor(entity, new PersonEditor());</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the result:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://shannah.github.io/CodeRAD/javadoc/doc-files/EntityEditor.png" alt="EntityEditor">
</div>
<div class="title">Figure 3. The UI generated from the above UI descriptor.  All fields are bound to the entity, so changes to the entity will instantly update the UI, and vice-versa.</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>EntityEditor</code> class is still under active development.  It will be undergoing a lot of changes to add support for more widgets, better styles, and validation.  The API may change.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">2. Installation</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As a prerequisite for everything in this manual, you&#8217;ll need to have one the major 3 Java IDEs (IntelliJ IDEA, NetBeans, or Eclipse) with the Codename One plugin installed.  For instructions on installing Codename One, see <a href="https://www.codenameone.com/download.html" class="bare">https://www.codenameone.com/download.html</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The CodeRAD library is distributed as a cn1lib.  For more information about the <strong>cn1lib</strong> format, see <a href="https://www.codenameone.com/manual/advanced-topics.html#_libraries_cn1lib">the cn1libs section of the Codename One manual</a>.</p>
</div>
<div class="paragraph">
<p>cn1libs need to be installed separately in each Codename One project in which they are used.  I.e. you don&#8217;t install them globally.  Rather you install them in each individual project.  Therefore, the remainder of the instructions assume that you have already created a project.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>For instructions on creating a new project in your IDE, please follow the appopriate link below for your IDE:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://www.codenameone.com/how-do-i---create-a-basic-hello-world-application&#8212;&#8203;send-it-to-my-device-using-intellij-idea.html">IntelliJ IDEA</a></p>
</li>
<li>
<p><a href="https://www.codenameone.com/how-do-i---create-a-basic-hello-world-application&#8212;&#8203;send-it-to-my-device-using-netbeans.html">NetBeans</a></p>
</li>
<li>
<p><a href="https://www.codenameone.com/how-do-i---create-a-basic-hello-world-application&#8212;&#8203;send-it-to-my-device-using-eclipse.html">Eclipse</a></p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_activating_css">2.1. Activating CSS</h3>
<div class="paragraph">
<p>CodeRAD uses CSS to provide styling for its components.  If you haven&#8217;t already activated CSS in your project, you&#8217;ll need to do that before installing the CodeRAD cn1lib.  See <a href="https://www.codenameone.com/blog/live-css-update.html">this tutorial</a> for instructions on activating CSS.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installing_the_coderad_cn1lib">2.2. Installing the CodeRAD cn1lib</h3>
<div class="paragraph">
<p>For instructions on installing cn1libs, see <a href="https://www.codenameone.com/blog/automatically-install-update-distribute-cn1libs-extensions.html">this tutorial</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">3. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The time has come to start writing some <strong>actual</strong> code - the "hello world" application.  We could just use the "Hello world bare-bones" project template for our project and be done with it (and we will use that template), be we want to do it the "CodeRAD" way, using MVC.</p>
</div>
<div class="sect2">
<h3 id="_step_1_create_a_new_project">3.1. Step 1: Create a New Project</h3>
<div class="paragraph">
<p>To begin, let&#8217;s create a new project, named "Hello World", using the "Hello world bare-bones" project template, activate CSS, and install the CodeRAD cn1lib.  See <a href="#installation">Installation</a> for instructions on these housekeeping tasks.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
I&#8217;m going to use the project name "HelloCodeRAD", project package "com.codename1.rad.hello", and "HelloCodeRAD" for my main class name in this tutorial.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_create_an_application_controller">3.2. Step 2: Create an Application Controller</h3>
<div class="paragraph">
<p>After you&#8217;ve created a new project, open up the main class, and replace the enter class contents with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.ApplicationController;
import com.codename1.ui.Form;
import com.codename1.ui.Label;
import com.codename1.ui.layouts.BoxLayout;

public class HelloCodeRAD extends ApplicationController {
    @Override
    public void start() {
        super.start();
        Form f = new Form("Hello", BoxLayout.y());
        f.add(new Label("Hello World"));
        f.show();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you run this project in the simulator, you&#8217;ll see a form with "Hello World" as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://i.imgur.com/Aeh90Hi.png" alt="Aeh90Hi">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_create_a_formcontroller">3.3. Step 3: Create a FormController</h3>
<div class="paragraph">
<p>Currently our app just contains a single ApplicationController that shows a form directly.  It is good practice, however, to create a FormController for each form.  The promotes more modularity, and will be easier to manage in the long run.  So let&#8217;s create a form controller for our form.</p>
</div>
<div class="paragraph">
<p>Create a new class in the same package, named "HelloFormController" with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.Controller;
import com.codename1.rad.controllers.FormController;
import com.codename1.ui.Form;
import com.codename1.ui.Label;
import com.codename1.ui.layouts.BoxLayout;

public class HelloFormController extends FormController {

    public HelloFormController(Controller parent) {
        super(parent); <b class="conum">(1)</b>
        Form f = new Form("Hello", BoxLayout.y());
        f.add(new Label("Hello World"));
        setView(f); <b class="conum">(2)</b>
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Controllers always take a "parent" controller as a parameter.  This assists in event propagation (unhandled controller events are automatically propagated up to the parent for handling), and navigation (Form "back" functionality is handled automatically, with the "back" command always navigating back to the parent form controller.</p>
</li>
<li>
<p>A <code>FormController</code> constructor should always call <code>setView(Form)</code> or <code>setView(Component)</code> with its view.  This registers the controller with the view so that events are properly propagated from the view to the controller, and it makes the Form available via <code>getView()</code> to be shown.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And change the code in our application controller to use our <code>HelloFormController</code> instead of creating a Form directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.ApplicationController;

public class HelloCodeRAD extends ApplicationController {
    @Override
    public void start() {
        super.start();
        new HelloFormController(this).getView().show(); <b class="conum">(1)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We removed our previous code the created and showed a form directly, and instead, we instantiate a form controller, and show its view.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now, if we run our project in the simulator, it should be unchanged from the first run, since all we&#8217;ve done is refactored our code to use controllers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_another_form">3.4. Adding another Form</h3>
<div class="paragraph">
<p>In order to demonstrate some of the advantages of using controllers, let&#8217;s go ahead and add another form to our project.  Create a new class in the same page named "MoreInfoFormController", with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.Controller;
import com.codename1.rad.controllers.FormController;
import com.codename1.ui.Label;

public class MoreInfoFormController extends FormController {
    public MoreInfoFormController(Controller parent) {
        super(parent);
        setTitle("More Info"); <b class="conum">(1)</b>
        setView(new Label("Hello Again!"));
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We call <code>setTitle()</code> in the controller because we aren&#8217;t creating the form manually here.  We&#8217;re passing a <code>Label</code> to <code>setView()</code>, so it will be wrapped in <code>Form</code> automatically.  By calling <code>setTitle()</code> we&#8217;re providing a title for the form when created.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>And add a button to our first form to navigate to this new form.  E.g, in the <code>HelloFormController</code>, add the following inside the constructor when building the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Button moreInfo = new Button("More Info...");
moreInfo.addActionListener(evt-&gt;{
    new MoreInfoFormController(this).getView().show(); <b class="conum">(1)</b>
});
f.add(moreInfo);</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We pass the <code>HelloFormController</code> instance as the parent controller of <code>MoreInfoFormController</code> so that the "back" button will return the user to this form.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Running the app inside the simulator now shows a "More Info&#8230;&#8203;" button on the first form:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://i.imgur.com/2jFMZLQ.png" alt="2jFMZLQ">
</div>
</div>
<div class="paragraph">
<p>Clicking this button shows the second form:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://i.imgur.com/suuPIn2.png" alt="suuPIn2">
</div>
</div>
<div class="paragraph">
<p>Notice that the second form automatically includes a "back" button that returns to the previous form.</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_a_view_model_asking_the_users_name">3.5. Adding a View Model: Asking the User&#8217;s Name</h3>
<div class="paragraph">
<p>We&#8217;ve successfully jumped the first hurdle.  We have a working hello world.  Let&#8217;s make the app a little bit more personalized now, by prompting the user to enter their name, and then saying "Hello &lt;Name&gt;" instead of "Hello World".  To do this we&#8217;re going to create a view model for our application, called "UserProfile".</p>
</div>
<div class="paragraph">
<p>To promote best practices we&#8217;ll create a separate package for our model classes.  I&#8217;m going to call my package <code>com.codename1.rad.hello.models</code>.  Create a new class in this package named "UserProfile" with the following contents:</p>
</div>
<div class="listingblock">
<div class="title">Boilerplate for a model class with a single property.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello.models;

import com.codename1.rad.models.Entity;
import com.codename1.rad.models.EntityType;
import com.codename1.rad.schemas.Person;

public class UserProfile extends Entity { <b class="conum">(1)</b>
    public static final EntityType TYPE = new EntityType() {{ <b class="conum">(2)</b>
        string(Person.name); <b class="conum">(3)</b>
    }};
    {
        setEntityType(TYPE); <b class="conum">(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Model classes always extends <code>Entity</code>.  This provides all of the functionality required for binding, reflection, change events, and loose-coupling.</p>
</li>
<li>
<p>We define an <code>EntityType</code> for this class, as a <code>static final</code> which defines the properties that are included in this entity.</p>
</li>
<li>
<p>We define the properties of the EntityType inside its initializer. (The double braces <code>{{</code> and <code>}}</code> is not a typo.). In this case we are defining a string field, and we are tagging it with the <code>Person.name</code> tag.  This allows for loose-coupling as any view can bind to this property without explicit knowledge that this field exists.  The View simply specifies that it binds to the <code>Person.name</code> tag, and it the <code>UserProfile</code> entity will know what to do to bind it.</p>
</li>
<li>
<p>In the initializer for <code>UserProfile</code> we set the entity type.  <strong>This is very important</strong>, otherwise instances of the <code>UserProfile</code> class won&#8217;t know what entity type they are.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_personalizing_helloformcontroller">3.5.1. Personalizing HelloFormController</h4>
<div class="paragraph">
<p>Let&#8217;s modify our HelloFormController to take a UserProfile as an argument, and display the user&#8217;s name instead.  Let&#8217;s modify it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.Controller;
import com.codename1.rad.controllers.FormController;
import com.codename1.rad.hello.models.UserProfile;
import com.codename1.rad.schemas.Person;
import com.codename1.ui.Form;
import com.codename1.ui.Label;
import com.codename1.ui.layouts.BoxLayout;

public class HelloFormController extends FormController {

    public HelloFormController(Controller parent, UserProfile user) { <b class="conum">(1)</b>
        super(parent);
        Form f = new Form("Hello", BoxLayout.y());
        f.add(new Label("Hello " + user.getText(Person.name))); <b class="conum">(2)</b>
        setView(f);
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We added the <code>user</code> parameter to set the user to say "hello" to.</p>
</li>
<li>
<p>We used the <code>user.getText(Person.name)</code> to get the value of the <code>Person.name</code> property as text.  This is loosely coupled as there are no specific references to the the "name" field in UserProfile.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
We declared the argument type as <code>UserProfile</code>, but we could have simply left it generic as <code>Entity</code> and it would work fine since we aren&#8217;t dependent on any thing specific about our UserProfile.  Declaring it a <code>UserProfile</code> might just be helpful for development since it allows you to more easily see which properties you expect to find on this entity.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now our <code>HelloFormController</code>, instead of saying "Hello World", it will say "Hello &lt;Name&gt;" where "&lt;Name&gt;" is the name stored in the provided user profile.  Next we&#8217;ll create a form to request the user&#8217;s name.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_the_askusernameformcontroller">3.5.2. Creating the AskUserNameFormController</h4>
<div class="paragraph">
<p>Create a new class in the main project package (the same package as our other controllers) named "AskUserNameFormController", with the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.Controller;
import com.codename1.rad.controllers.FormController;
import com.codename1.rad.hello.models.UserProfile;
import com.codename1.rad.schemas.Person;
import com.codename1.ui.Button;
import com.codename1.ui.Form;
import com.codename1.ui.Label;
import com.codename1.ui.TextField;
import com.codename1.ui.layouts.BoxLayout;


public class AskUserNameFormController extends FormController {
    public AskUserNameFormController(Controller parent) {
        super(parent);
        UserProfile user = new UserProfile(); <b class="conum">(1)</b>
        Form f = new Form("Enter Name", BoxLayout.y());
        TextField nameField = new TextField();
        Button submit = new Button("Submit");
        submit.addActionListener(evt-&gt;{
            user.setText(Person.name, nameField.getText()); <b class="conum">(2)</b>
            new HelloFormController(this, user).getView().show(); <b class="conum">(3)</b>
        });
        f.addAll(new Label("Please enter your name:"), nameField, submit);
        setView(f); <b class="conum">(4)</b>

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We create a new "model" object to store the user&#8217;s information.</p>
</li>
<li>
<p>When the user presses the "Submit" button, it sets the user name in the model.</p>
</li>
<li>
<p>After setting the user name in the model, it will display the HelloWorldFormController, and pass the user model to it.</p>
</li>
<li>
<p><strong>Don&#8217;t forget to call <code>setView()</code> with our form.</strong></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_changing_start_form">3.5.3. Changing Start Form</h4>
<div class="paragraph">
<p>Finally, we need to modify our application controller to show the <code>AskUserNameForm</code> on start rather than the <code>HelloForm</code> directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.ApplicationController;

public class HelloCodeRAD extends ApplicationController {
    @Override
    public void start() {
        super.start();
        new AskUserNameFormController(this).getView().show();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you run this in the simulator you should now see something like:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://i.imgur.com/E0jnw0y.png" alt="E0jnw0y">
</div>
</div>
<div class="paragraph">
<p>After entering your name and pressing "Submit" you should see:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://i.imgur.com/jCym8Eq.png" alt="jCym8Eq">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_refactoring_creating_views">3.6. Refactoring: Creating Views</h3>
<div class="paragraph">
<p>Up until now, we&#8217;ve been building our views directly inside the controller because they have been trivial.  This strategy won&#8217;t scale well, however.  For best results in real-world apps  we should adopt MVC in its entirety, and not just "MC" as we&#8217;ve done to this point.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s begin with a simple refactor.  Create a new package named "com.codename1.rad.hello.views", and add two new classes there to house the two views in our app: "HelloView" and "AskUserNameView".</p>
</div>
<div class="listingblock java">
<div class="title">HelloView.java - Component extends a plain <code>Container</code> because it doesn&#8217;t require two-way binding.</div>
<div class="content">
<pre class="highlight"><code>package com.codename1.rad.hello.views;

import com.codename1.rad.hello.models.UserProfile;
import com.codename1.rad.schemas.Person;
import com.codename1.ui.Container;
import com.codename1.ui.Label;
import com.codename1.ui.layouts.BoxLayout;


public class HelloView extends Container {
    public HelloView(UserProfile user) {
        super(BoxLayout.y());
        add(new Label("Hello " + user.getText(Person.name)));
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">AskUserNameView.java - Component extends <code>AbstractEntityView</code> because it needs to be able to fire events which can be caught by ViewController</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello.views;

import com.codename1.rad.hello.models.UserProfile;
import com.codename1.rad.nodes.ActionNode;
import com.codename1.rad.nodes.ActionNode.Category;
import com.codename1.rad.nodes.Node;
import com.codename1.rad.nodes.ViewNode;
import com.codename1.rad.schemas.Person;
import com.codename1.rad.ui.AbstractEntityView;
import com.codename1.ui.Button;
import com.codename1.ui.Label;
import com.codename1.ui.TextField;


public class AskUserNameView extends AbstractEntityView { <b class="conum">(1)</b>
    public static final Category SUBMIT_FORM = new Category(); <b class="conum">(2)</b>
    private ViewNode node;
    public AskUserNameView(UserProfile user, ViewNode node) { <b class="conum">(3)</b>
        super(user);
        this.node = node;
        TextField nameField = new TextField();
        Button submit = new Button("Submit");
        submit.addActionListener(evt-&gt;{
            user.setText(Person.name, nameField.getText());
            ActionNode submitAction = node.getInheritedAction(SUBMIT_FORM); <b class="conum">(4)</b>
            if (submitAction != null) {
                submitAction.fireEvent(user, this); <b class="conum">(5)</b>
            }
        });
        addAll(new Label("Please enter your name:"), nameField, submit);
    }

    @Override
    public void update() {
        <b class="conum">(6)</b>
    }

    @Override
    public void commit() {
        <b class="conum">(7)</b>
    }

    @Override
    public Node getViewNode() {
        return node; <b class="conum">(8)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Since the <code>AskUserNameView</code> is more complex than the <code>HelloView</code> we will derive from <code>AbstractEntityView</code> instead of <code>Container</code> because it includes some handy features for property binding and event dispatching.</p>
</li>
<li>
<p>We define a <code>Category</code> so that controllers that instantiate this view can register actions in this category to receive events when the user presses "Submit".  We&#8217;ll refer to this later from our controller.</p>
</li>
<li>
<p>The constructor takes a model (<code>Entity</code>) and a <code>ViewNode</code> as a parameter.  We&#8217;ll learn more about <code>ViewNode</code> in a moment. A view node is kind of like a "schema" for the view.  It allows you to pass attributes to the view that will affect how the view behaves.</p>
</li>
<li>
<p>We check to see if the controller has registered an action to be notified when the user presses "Submit".  You&#8217;ll see later how this action is registered from the controller.</p>
</li>
<li>
<p>We fire an event to the registered action.  We pass the current model, <code>user</code>, and the originating component of the event <code>this</code>.  This event will be dispatched to the controller, and will propagate up the controller hierarchy until it is consumed, or until it reaches the top of the hierarchy.</p>
</li>
<li>
<p>The <code>update()</code> method will be run any time any of the properties in the model (i.e. <code>user</code>) are changed.  This can be used to help keep the view in sync with its model.</p>
</li>
<li>
<p>The <code>commit()</code> method is a placeholder that is meant to be called when the view makes changes that should update the model.  In this case it doesn&#8217;t do anything because our view hasn&#8217;t bound any listeners to the view.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_changing_controllers_to_use_views">3.6.1. Changing Controllers to use Views</h4>
<div class="paragraph">
<p>Now that we have our views, let&#8217;s modify our two form controllers to use these views instead of building the UI directly in the controller.</p>
</div>
<div class="paragraph">
<p>Changing <code>HelloFormController</code> is trivial.</p>
</div>
<div class="listingblock">
<div class="title">HelloFormController.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.Controller;
import com.codename1.rad.controllers.FormController;
import com.codename1.rad.hello.models.UserProfile;
import com.codename1.rad.hello.views.HelloView;

public class HelloFormController extends FormController {

    public HelloFormController(Controller parent, UserProfile user) {
        super(parent);
        setTitle("Hello");
        setView(new HelloView(user)); <b class="conum">(1)</b>
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>In this example we set the view using the <code>HelloView</code> directly because it will be wrapped in a Form automatically.  We could have still created a form manually, and added the <code>HelloView</code> instance to it.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>AskUserNameFormController</code> requires a few more changes since we need to register an action to be notified when the user presses "Submit".</p>
</div>
<div class="listingblock">
<div class="title">AskUserNameFormController.java</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello;

import com.codename1.rad.controllers.Controller;
import com.codename1.rad.controllers.FormController;
import com.codename1.rad.hello.models.UserProfile;
import com.codename1.rad.hello.views.AskUserNameView;
import com.codename1.rad.nodes.ActionNode;
import com.codename1.rad.nodes.ViewNode;
import static com.codename1.rad.ui.UI.actions;
import com.codename1.ui.Form;
import com.codename1.ui.layouts.BorderLayout;


public class AskUserNameFormController extends FormController {
    public static final ActionNode submit = new ActionNode(); <b class="conum">(1)</b>

    public AskUserNameFormController(Controller parent) {
        super(parent);
        UserProfile user = new UserProfile();
        Form f = new Form("Enter Name", new BorderLayout());
        f.add(BorderLayout.CENTER, new AskUserNameView(user, new ViewNode(
                actions(AskUserNameView.SUBMIT_FORM, submit) <b class="conum">(2)</b>
        )));
        setView(f);

        addActionListener(submit, evt-&gt; { <b class="conum">(3)</b>
            evt.consume();
            new HelloFormController(this, user).getView().show();
        });

    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We define a <code>submit</code> action that we will pass to the <code>AskUserNameView</code> in order to be notified when the user presses the <code>submit</code> button.  This is a bare minimal action that solely designed to register to receive events, but you&#8217;ll find out later that Actions are incredibly powerful as a tool for customizing Views to suit your application&#8217;s needs.</p>
</li>
<li>
<p>We pass the <code>submit</code> action to the view here, registering it with the <code>SUBMIT_FORM</code> category, so that the view knows to notify us when the user presses submit.</p>
</li>
<li>
<p>We add an action listener for the <code>submit</code> action to actually handle the event that the view dispatches to us.  Notice that we consume the event as this signals to the view that the action was processed, lest it try to perform some fall-back behaviour.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>At first, this refactoring may make the application appear more complicated.  It is more lines of code, and we&#8217;ve had to introduce some new concepts - <strong>Categories</strong>, <strong>Actions</strong>, <strong>ViewNodes</strong>.  What have we gained here to justify the added complexity?  Quite a lot, actually.</p>
</div>
<div class="paragraph">
<p>By separating the "view" logic from the "controller" logic, we are able to potentially reuse the view in other contexts.  In the next step, we&#8217;ll do some further refactoring that will highlight a few other advantages also.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_property_view_binding">3.7. Property View Binding</h3>
<div class="paragraph">
<p>Our current <code>AskUserNameView</code> doesn&#8217;t yet exploit CodeRAD&#8217;s property binding features. We are manually setting the "name" property on the model when the user presses "Submit".  Instead of this, let&#8217;s use a <code>PropertyView</code> to use a view that automatically binds to the "name" property so that the text field is always kept in sync with the property value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello.views;

import com.codename1.rad.hello.models.UserProfile;
import static com.codename1.rad.ui.UI.*;
import com.codename1.rad.nodes.ActionNode;
import com.codename1.rad.nodes.ActionNode.Category;
import com.codename1.rad.nodes.Node;
import com.codename1.rad.nodes.ViewNode;
import com.codename1.rad.propertyviews.TextFieldPropertyView;
import com.codename1.rad.schemas.Thing;
import com.codename1.rad.ui.AbstractEntityView;
import com.codename1.ui.Button;
import com.codename1.ui.Label;
import com.codename1.ui.TextField;


public class AskUserNameView extends AbstractEntityView {
    public static final Category SUBMIT_FORM = new Category();
    private ViewNode node;
    public AskUserNameView(UserProfile user, ViewNode node) {
        super(user);
        this.node = node;
        TextFieldPropertyView nameField = new TextFieldPropertyView( <b class="conum">(1)</b>
                new TextField(), <b class="conum">(2)</b>
                user, <b class="conum">(3)</b>
                textField( <b class="conum">(4)</b>
                        tags(Thing.name) <b class="conum">(5)</b>
                )
        );
        Button submit = new Button("Submit");
        submit.addActionListener(evt-&gt;{
            ActionNode submitAction = node.getInheritedAction(SUBMIT_FORM);
            if (submitAction != null) {
                submitAction.fireEvent(user, this);
            }
        });
        addAll(new Label("Please enter your name:"), nameField, submit);
    }

    @Override
    public void update() {

    }

    @Override
    public void commit() {

    }

    @Override
    public Node getViewNode() {
        return node;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Rather than create a <code>TextField</code> for the user to enter their name, we create a <code>TextFieldPropertyView</code>.  The difference is that the <code>TextFieldPropertyView</code> has 2-way binding with the "name" property so that it is always up to date.</p>
</li>
<li>
<p>We create the actual text field that will be used in this view, and pass it as the first parameter.</p>
</li>
<li>
<p>2nd parameter is the entity to which the view is bound.</p>
</li>
<li>
<p>3rd parameter is a <code>FieldNode</code> with with settings for the view, including which property is bound. <code>textField()</code> is a static method of the <code>UI</code> class that creates a <code>FieldNode</code> with widget type TEXT.</p>
</li>
<li>
<p>Binds to the <code>Thing.name</code> property.  Note that this is loose-binding, since it doesn&#8217;t depend directly on the properties of <code>UserProfile</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once again, this may look like we&#8217;ve added complexity, since there are more lines of code. However, we have made the solution more elegant.  Notice that we removed the line in the action listener that sets the "name" property.  This is no longer necessary because the text field is bound to the "name" property, so it is always in sync.</p>
</div>
<div class="paragraph">
<p>If you run the project in the simulator, it should be exactly the same as before the refactor.</p>
</div>
<div class="sect3">
<h4 id="_using_entityeditor_for_the_input_form">3.7.1. Using <code>EntityEditor</code> for the Input Form</h4>
<div class="paragraph">
<p>The last couple of refactors actually increased the amount of code.  I did them to incrementally demonstrate some core features of CodeRAD.  In the next step, I&#8217;d like to demonstrate the <code>EntityEditor</code> class to show you, perhaps, an easier way to add input forms to your apps.  The EntityEditor takes an entity and a UI description to render an input form.</p>
</div>
<div class="paragraph">
<p>The following snippet shows how to create an EntityEditor for editing the "name" field in an entity:</p>
</div>
<div class="listingblock">
<div class="title">Creating an EntityEditor to edit a single property.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import static com.codename1.rad.ui.UI.*;

...

FormNode formNode = new FormNode( <b class="conum">(1)</b>
    editable(true), <b class="conum">(2)</b>
    textField( <b class="conum">(3)</b>
        label("Please enter your name:"), <b class="conum">(4)</b>
        tags(Thing.name) <b class="conum">(5)</b>
    )
);
EntityEditor ee = new EntityEditor(user, formNode); <b class="conum">(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>We create a <code>FormNode</code> as a UI descriptor for our input form.  This allows us to describe the UI declaratively.</p>
</li>
<li>
<p>The <code>editable(true)</code> call makes the form editable.  If we don&#8217;t include this, then the form would be read-only.</p>
</li>
<li>
<p>The <code>textField()</code> method is a static method defined in the <code>UI</code> class, which returns a <code>FieldNode</code> with the <code>TEXT</code> widget type.  This is like a command that tells the EntityEditor to render a text field.</p>
</li>
<li>
<p>The <code>label()</code> method sets the field label for the form.</p>
</li>
<li>
<p><code>tags(Thing.name)</code> will bind the text field to the "name" property of the entity that will be edited.</p>
</li>
<li>
<p>Finally we create the <code>EntityEditor</code>, which is a subclass of <code>Container</code>, so it can be added directly to your form.  It takes two parameters: the "user", which serves as the "view model", or "what to edit", and the "formNode" which serves as the ui descriptor, or "how to edit".</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After replacing our text field with this entity editor in our <code>AskUserNameView</code>, the source becomes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package com.codename1.rad.hello.views;

import com.codename1.rad.hello.models.UserProfile;
import com.codename1.rad.nodes.ActionNode;
import static com.codename1.rad.ui.UI.*;
import com.codename1.rad.nodes.ActionNode.Category;
import com.codename1.rad.nodes.FormNode;
import com.codename1.rad.nodes.Node;
import com.codename1.rad.nodes.ViewNode;
import com.codename1.rad.schemas.Thing;
import com.codename1.rad.ui.AbstractEntityView;
import com.codename1.rad.ui.EntityEditor;
import com.codename1.ui.Button;


public class AskUserNameView extends AbstractEntityView {
    public static final Category SUBMIT_FORM = new Category();
    private ViewNode node;
    public AskUserNameView(UserProfile user, ViewNode node) {
        super(user);
        this.node = node;
        FormNode formNode = new FormNode(
            editable(true),
            textField(
                label("Please enter your name:"),
                tags(Thing.name)
            )
        );
        EntityEditor ee = new EntityEditor(user, formNode);
        Button submit = new Button("Submit");
        submit.addActionListener(evt-&gt;{
            ActionNode submitAction = node.getInheritedAction(SUBMIT_FORM);
            if (submitAction != null) {
                submitAction.fireEvent(user, this);
            }
        });

        addAll(ee, submit);
    }

    @Override
    public void update() {

    }

    @Override
    public void commit() {

    }

    @Override
    public Node getViewNode() {
        return node;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, in such a small example, it may look like we&#8217;re not gaining much by this abstraction, but when the application grows to real-world proportions, being able to encapsulate all of the input forms inside a declarative UI structure like this will make the code much easier to read and maintain.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_summary">3.8. Summary</h3>
<div class="paragraph">
<p>This chapter was meant only to scratch the surface of what it is like to develop and app with CodeRAD. Some key points that we covered include:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use an <code>ApplicationController</code> subclass as the entry point for your application.</p>
</li>
<li>
<p>Each form of your application should have an associated controller which is a subclass of <code>FormViewController</code>.</p>
</li>
<li>
<p>All controllers, except for the ApplicationController should have a parent controller so that the application has a "controller hierarchy".</p>
</li>
<li>
<p>The "controller hierarchy" helps to structure the application by allowing events to propagate up through the hierarchy from children to parents.  This results in looser coupling between the forms of an application, and it provides a built-in navigation stack.  The "Back" button always goes to the "parent" controller&#8217;s form, for example.</p>
</li>
<li>
<p>By using CodeRAD&#8217;s <code>Entity</code> class as a base class for your application&#8217;s "model" classes, you get property binding, and loose-coupling between your models and views.</p>
</li>
<li>
<p>The <code>AbstractEntityView</code> class can be used instead of "Container" to build "live", rich, loosely-coupled UI components that bind to your models.</p>
</li>
<li>
<p>The <code>EntityEditor</code> class is a "live" UI component that will allow you to edit one or more properties of a model/entity.  It takes a <code>FormNode</code> as a parameter, which declaratively defines how the form should be rendered - e.g. fields, sections, widget types, actions, etc..  This chapter only showed a tiny glimpse of its capabilities.  As you&#8217;ll learn later on in this book, the EntityEditor can be customized to a great extent to provide nearly all of your model editing needs.  It supports many different widget types, and allows you to arrange your forms into sections with different layouts for each section; inject actions which manifest themselves as menus and buttons in strategic places in the form; and is completely plugable to add your own widget types and rendering strategies.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_where_to_go_from_here">3.9. Where to go from here</h3>
<div class="paragraph">
<p>This chapter only offered a small glimpse of how CodeRAD applications are structured, but it didn&#8217;t go into very much detail of the fundamentals.  The fundamental concepts of CodeRAD are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Controllers</strong> - After the examples in this chapter, you should have enough knowledge to start writing your own controllers, but I recommend reading the "Controllers" chapter to gain a better understand of how they work, so that you can squeeze as much benefit possible out of them.  You should also check out the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/controllers/package-summary.html">JavaDocs for the <code>com.codename1.rad.controllers</code> package</a> to get a better handle on the API.</p>
</li>
<li>
<p><strong>Nodes and Attributes</strong> - One of the big innovations of CodeRAD is its use of Nodes and Attributes to declaratively describe its views.  CodeRAD views generally take 2 parameters in their constructors - an entity which serves as the view model, and a Node which serves as its UI descriptor.  In other words, "what" to render and "how" to render it.  The CodeRAD core library defines a comprehensive set of Nodes and attributes for all occasions.  See the "Nodes and Attributes" chapter for a deep-dive into these useful tools, and check of the javadocs for <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/attributes/package-summary.html">attributes</a> and <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/nodes/package-summary.html">nodes</a> to see what nodes and attributes are available.</p>
</li>
<li>
<p><strong>Entities, EntityTypes, and Properties</strong> - You should have a rough idea of how entities work, but this chapter only showed very simple useage scenarios (an entity with only a single property).  I recommend reading the "Entities" chapter to obtain a more complete picture of what they can offer.  Also, read the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/models/package-summary.html">javadocs for the com.codename1.rad.models package</a> to peruse the API and see what is possible.</p>
</li>
<li>
<p><strong>Loose Binding: Schemas and Tags</strong> - Another key innovation of CodeRAD is its loose-binding which is enabled by the "schemas" and "tags".  Views can be bound to properties directly (tight binding) which makes it difficult to reuse them in different projects.  Views can also be bound to properties indirectly using "tags" (loose binding), which makes it much easier to reuse both the views and the models across projects.  This is the key feature that will allow us to develop reusable libraries of rich UI components.  Some examples of this are the <a href="https://github.com/shannah/RADChatRoom">Chat App UI Kit</a>, which provides a fully-functional and customizable chat room UI component, and the <a href="https://github.com/shannah/TweetAppUIKit">Tweet App UI Kit</a> which provides a set of UI components inspired by Twitter.</p>
</li>
<li>
<p><strong>Actions</strong> - Actions are heavy-hitters in CodeRAD, and a solid understanding of them will allow you to get the most out of CodeRAD views.  This chapter offered the briefest glimpse of actions (we used an ActionNode for the "submit" action in our "AskUserNameView", but I recommend you read the entire chapter on actions to see their full potential.  Most customization of CodeRAD views is done through actions.  Views will advertise (in their documentation) which action categories they support, and registering an action in those categories will result in the insertion of a menu item, or a button, in the view&#8217;s prescribed location.  Additionally, actions can be used to receive events back from the view.  In addition to the "Actions" chapter, you should check out the <a href="https://shannah.github.io/CodeRAD/javadoc/com/codename1/rad/nodes/ActionNode.html">ActionNode javadocs</a> for more examples and a more comprehensive look at the API.</p>
</li>
<li>
<p><strong>Views</strong> - CodeRAD views are the pay-off of the foundation provided by Entities, Tags, Actions, Nodes, Attributes, and Controllers. Views that fully exploit CodeRAD&#8217;s loose-binding will be reusable to an unprecedented level.  This chapter introduced the <code>AbstractEntityView</code> class, which is a base class for views that can bind to a model, and the <code>EntityEditor</code> class, which is a rich view which generates an "edit" form for an entity.  These are just two of the available reusable views offered by CodeRAD.  This book includes a few different chapters on views, but at a minimum, I recommend reading the "Survey of CodeRAD Views" chapter, and the "Creating Custom Views" chapter as these will give you a tour of views from both sides: how to "use" them, and how to "make" them.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_some_other_resources">3.9.1. Some other Resources</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <a href="https://shannah.github.io/RADChatRoom/getting-started-tutorial.html">Chat App UI Kit tutorial</a>, provides an alternative "entry" point to this chapter.  Instead of making a "Hello World" app, it shows you how to create a messaging application.</p>
</li>
<li>
<p>Check out the <a href="https://www.codenameone.com">Codename One website</a> for more information about Codename One.</p>
</li>
<li>
<p>Check out the <a href="https://github.com/shannah/CodeRAD">CodeRAD Github page</a> for more information about CodeRAD.</p>
</li>
<li>
<p>For help, you can ask questions on <a href="http://stackoverflow.com/tags/codenameone">Stack Overflow</a> (tag questions as <code>codenameone</code>), or on the <a href="https://www.codenameone.com/discussion-forum.html">Codename One message forum</a>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_controllers">4. Controllers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_application_structure_and_form_navigation_pre_coderad">4.1. Application Structure and Form Navigation Pre-CodeRAD</h3>
<div class="paragraph">
<p>How do you structure your Codename One apps?  How do you share data between different forms?  How do you maintain state between forms?  How do you manage navigation between forms?  E.g. When the user presses "Back", how do you decide what to do?</p>
</div>
<div class="paragraph">
<p>Codename One is not opinionated on these questions.  Essentially, you may structure your app however you like.  The "old" GUI builder used a <code>StateMachine</code> as a monolithic controller that managed state and navigation.  All forms used this single controller for all of their event handling and callbacks.  This worked well for small to mid-sized apps, but on larger apps, it soon became necessary to refactor the logic into separate files.</p>
</div>
<div class="paragraph">
<p>The new GUI builder moved to a less opinionated approach.  A GUI builder form would map to either a "Form" or a "Container".  I.e. just the view.  You were free to use these views in your application however you liked.  You could structure your app however you liked.</p>
</div>
<div class="paragraph">
<p>The other day I was asked by a new developer "How do you push and pop forms?".  The question seems to assume that there must be some sort of navigation stack for forms, but there isn&#8217;t really.  The Codename One API leaves you free to implement a navigation stack however you like.  The <code>Form</code> API allows you to show a form with <code>show()</code> (and <code>showBack()</code> to show it with a reverse transition), but you are free to organize your form navigation stack however you like.</p>
</div>
<div class="paragraph">
<p>A common, though quick and dirty, approach is to grab a reference to the "current" form when you create a new form, and use this for your "back" command.  E.g.</p>
</div>
<div class="listingblock">
<div class="title">Sample code using the "current" form for the back command on a new form.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Form f2 = new Form("Result", new BorderLayout());
Form f = CN.getCurrentForm();
if (f != null) {
    f2.setBackCommand("Back", null, evt-&gt;{
        f.showBack();
    });
    f2.getToolbar().addCommandToLeftBar("Back", null, evt-&gt;{
        f.showBack();
    });
}
f2.show();</code></pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s nothing wrong with this approach, other than the fact that it gets tedious doing this on every single form.  We could reduce the boilerplate code here by abstracting this behaviour out into a separate class, so that we can "reuse" our solution on every form.  Let&#8217;s look at such an abstraction:</p>
</div>
<div class="listingblock">
<div class="title">A very simple abstraction for "Back" functionality on forms.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MyFormController {
    private Form form;

    public MyFormController(Form form) {
        this.form = form;
        Form backForm = CN.getCurrentForm();
        if (backForm != null) {
            form.setBackCommand("Back", null, evt-&gt;{
                backForm.showBack();
            });
            form.getToolbar().addCommandToLeftBar("Back", null, evt-&gt;{
                backForm.showBack();
            });
        }
    }

    public void show() {
        form.show();
    }

    public void showBack() {
        form.showBack();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>What we&#8217;ve created here is a very simple controller, as in the "C" in MVC.  This controller implements the "back" navigation for our forms, so that the form itself doesn&#8217;t need to contain the logic itself.</p>
</div>
</div>
<div class="sect2">
<h3 id="_app_structure_as_a_tree">4.2. App Structure as a Tree</h3>
<div class="paragraph">
<p>Once you start walking down the path extracting navigation logic into a "controller" class, you can start to think about your application&#8217;s structure more clearly. For example, we naturally think of UI component hierarchy as a tree-like structure, where the <code>Form</code> is the root, and the containers and components are the nodes.  Thinking in these terms makes it easy to visualize the structure of a form:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Containers have child components</p>
</li>
<li>
<p>Components have a parent container</p>
</li>
<li>
<p>Events can propagate up from a child component, to its parent, and ultimately up to the root - the <code>Form</code> itself.</p>
</li>
<li>
<p>Containers can be laid out and painted, which will propagate layout and painting down to its children, and their children, all the way down to the leaves of the container&#8217;s branch.</p>
</li>
<li>
<p>The state of a container can affect the state of its children. E.g.:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Shifting a container 5 pixels to the right, will shift all children&#8217;s absolute position 5 to the right also.</p>
</li>
<li>
<p>Changing the alpha or transform setting while painting a container will affect the alpha or transform on its children.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-021231.287.png" alt="Image 300320 021231.287">
</div>
<div class="title">Figure 4. A simple Form UI presented here as a diagram that emphasizes containment.  The next figure shows the same UI expressed in a tree diagram.</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-020346.131.png" alt="Image 300320 020346.131">
</div>
<div class="title">Figure 5. A UI component visualized as a tree, with the Form as the "root" node, each container a branch, and atomic components (e.g. Label, Button, TextField) as leaf nodes.</div>
</div>
<div class="paragraph">
<p>In fact, we derive many benefits from the fact that the UI can be mapped to a tree data structure.  Trees are nice to work with because they lend themselves nicely to software.  If you can write a function that operates on a single node of the tree, you can easily expand this function to operate on the entire tree.</p>
</div>
<div class="paragraph">
<p>Now, try to imagine your application as a tree structure.  Each node of the tree is a controller - the root node is the "Application", and most of the other nodes are Forms.  The "child" nodes of a Form node are those forms that you navigate to from a given form.  This implies that the "Back" command for any given node will navigate back to the "parent" Form node.</p>
</div>
<div class="paragraph">
<p>In order to properly encapsulate all of this structure without it bleeding into the views themselves, we implement these nodes as "Controller" classes.</p>
</div>
<div class="paragraph">
<p>As an example, consider the Twitter mobile app.  A few of its screens are shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-023353.927.png" alt="Image 300320 023353.927">
</div>
<div class="title">Figure 6. Screenshots from the Twitter mobile app.</div>
</div>
<div class="paragraph">
<p>The app structure of Twitter has 4 top-level FormControllers corresponding to the tabs at the bottom of the app:  Home, Search, Alerys, and Inbox.  The "Home" tab contains a list of tweets, and clicking on any of these tweets will bring the user to a "Tweet Details" form.  Hence in the controller hierarchy, the "Home" tab is a top-level form (a child of the ApplicationController), and it has at least one child, the "Tweet Details" form controller.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-023007.132.png" alt="Image 300320 023007.132">
</div>
<div class="title">Figure 7. A partial controller hierarchy for the Twitter mobile app.  <strong>Note that this is not a class hierarchy</strong>, as many of these nodes are instances of the same class.  It reflects the structure of the app in the sense that a node A is a child of node "B" if the user can navigate from node "A" to node "B".</div>
</div>
</div>
<div class="sect2">
<h3 id="_coderad_core_controllers">4.3. CodeRAD Core Controllers</h3>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-015455.241.png" alt="Image 300320 015455.241">
</div>
<div class="title">Figure 8. The main controller classes provided by CodeRAD.</div>
</div>
<div class="paragraph">
<p>CodeRAD provides a set of fundamental controller classes to help structure your app in this way:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ApplicationController</code> - The root application controller.</p>
</li>
<li>
<p><code>SectionController</code> - A controller for a section of the app.  This can be a useful parent node to a set of related form nodes, to help group them together.</p>
</li>
<li>
<p><code>FormController</code> - A controller for a single form.</p>
</li>
<li>
<p><code>ViewController</code> - A controller for a single Component on a form.  (This is a superclass of <code>FormController</code>, and in most cases <code>ViewController</code> on sub-components of a form aren&#8217;t necessary.  Only in complex cases).</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_event_propagation_2">4.4. Event Propagation</h3>
<div class="paragraph">
<p>Mapping our app structure onto a controller tree brings other benefits as well.  Just as we can propagate events up a UI component hierarchy for handling.  We can propagate events up a controller hierarchy as well.  In GUI applications, events are a very effective way of passing information between different parts of the application without introducing coupling.</p>
</div>
<div class="paragraph">
<p>The <code>Controller</code> class implements <code>ActionListener</code>, and all <code>ControllerEvents</code> that are fired in the UI, will be dispatched to the nearest <code>ViewController</code>, and then propagated up the controller hierarchy until it is consumed by a <code>Controller</code>, or until it reaches the root controller.  Additionally, <code>Controller</code> implements <code>ActionSource</code> (i.e. implements <code>addActionListener()</code>) so that interested parties can subscribe to receive notifications about these controller events.</p>
</div>
<div class="paragraph">
<p>Event propagation is used to great effect internally in the CodeRAD library for such things as "Back" events, but it can and should also be utilized by application code to help reduce coupling and keep code clean.</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_sharing_lookups">4.5. Code-sharing / Lookups</h3>
<div class="paragraph">
<p>CodeRAD controllers also exploit their tree structure to facilitate sharing of data from a "parent" controller to its children via the "lookup" mechanism.  For example, perhaps you need to keep track of the current logged-in user for your app.  One way to do it is to use static globals (this includes using a Singleton).  But a more elegant approach is to use lookups in your ApplicationController, which are available to be "looked up" from all of its children.</p>
</div>
<div class="paragraph">
<p>E.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">//.. somewhere in the application controller
UserProfile loggedInUser = getLoggedInUser();
addLookup(loggedInUser);

...

//.. in a child controller
UserProfile loggedInUser = lookup(UserProfile.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>lookup()</code> method exploits the tree structure of the controller hierarchy by checking the current controller for an object of type <code>UserProfile.class</code>, and if it doesn&#8217;t exist, it checks the parent controller.  And so on until it reaches the root.</p>
</div>
<div class="paragraph">
<p>This allows us to completely encapsulate all functionality related to the logged in user in the ApplicationController, or a specific sub-controller, and it is made available to all parts of the app.</p>
</div>
</div>
<div class="sect2">
<h3 id="_example_controllers">4.6. Example Controllers</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The following examples all use an ApplicationController as the root of the controller hierarchy, but it is also possible to use a controller in isolation.  You just won&#8217;t receive the full benefits of an application-wide controller hierarchy.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The easiest way to implement an application controller in your app is for your app&#8217;s main lifecycle class (i.e. the class with <code>init()</code>, <code>start()</code>, <code>stop()</code> and <code>destroy()</code>) to extend <code>ApplicationController</code>.  The <code>ApplicationController</code> class implements all of the lifecycle methods with sensible defaults.  Therefore, you can simply override the start() method as shown below:</p>
</div>
<div class="listingblock">
<div class="title">MyApplication.java - A minimal application controller.   This controller overrides the <code>start()</code> method and instantiates a <code>FormController</code>, then shows it.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MyApplication extends ApplicationController {
    @Override
    public void start() {
        super.start();
        new MainFormController(this).show();
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">MainFormController.java - A minimal FormController.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MainFormController extends FormController {
    public MainFormController(Controller parent) {
        super(parent);
        Form f = new Form("Hello");
        f.add(new Label("Hello World"));
        setView(f);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_form_navigation">4.7. Form Navigation</h3>
<div class="paragraph">
<p>As we&#8217;ve already seen, "back" functionality is handled automatically by the <code>FormController</code>.  If there is a "parent" FormController of the form, then it will add a "back" button to the toolbar and set a "back" command to go to that toolbar.  However, you can also explicitly trigger a "back" event by firing a <code>FormBackEvent</code> (an internal class in <code>FormController</code>).</p>
</div>
<div class="paragraph">
<p>For example, we might want to create a reusable view called "BackButton", which is just a Button, that, when pressed, will fire a "FormBackEvent".</p>
</div>
<div class="listingblock">
<div class="title">View that fires a <code>FormBackEvent</code>.  This view can be added anywhere in the UI, and clicking it cause the app to navigate back to the "parent" (previous) form.</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">class BackButton extends Button {
    public BackButton() {
        super("Go Back");
        addActionListener(evt-&gt;{
            evt.consume();
            ActionSupport.dispatchEvent(new FormBackEvent(this));
        });
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>BackButton</code> can be added anywhere in the UI.  You don&#8217;t need to write any "handling" code to catch this <code>FormBackEvent</code> because it will propagate up the component hierarchy until it finds the nearest ViewController, then continue to propagate up to the FormController, which will consume the event.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Image-300320-014315.510.png" alt="Image 300320 014315.510">
</div>
<div class="title">Figure 9. The flow of the <code>FormBackEvent</code> as it propagates up to the first FormController, which consumes the event, and navigates back to the previous/parent form.</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-03-30 11:23:22 -0700
</div>
</div>
</body>
</html>